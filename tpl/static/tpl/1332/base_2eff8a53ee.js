window.Zepto&&function(t){["width","height"].forEach(function(n){var e=n.replace(/./,function(t){return t[0].toUpperCase()});t.fn["outer"+e]=function(t){var e=this;if(e){var o=e[n](),i={width:["left","right"],height:["top","bottom"]};return i[n].forEach(function(n){t&&(o+=parseInt(e.css("margin-"+n),10))}),o}return null}})}(Zepto),define("vendor/zepto/outer",function(){}),define("wap/components/footer_auto",["vendor/zepto/outer"],function(){var t=navigator.userAgent;if(!(t.indexOf("MI")>-1&&t.indexOf("NX507J")>-1)&&$(".js-footer-autoheight").length&&!$(".full-screen").length){var n=$(window).height(),e=$(".footer").outerHeight(!0)||0,o=$(".container > .header"),i=$(".content"),a=$(".shop-nav"),s=n-e;o.length&&(s-=o.outerHeight(!0)),a.length&&(s-=a.outerHeight(!0)),i.length&&i.css("min-height",s+"px")}}),function(){function t(){clearTimeout(i),n.addClass("done")}var n=$(".js-tpl-weixin-list-item"),e=$(".js-tpl-weixin-bg");if(!(e.length<=0)){var o=e[0],i=setTimeout(function(){t()},2e3);o.onload=o.onerror=o.onabort=t,o.complete&&t()}}(),function(){var t=$(".js-tpl-shop"),n="/v2/showcase/homepage/goodscount.json";t.length&&$.ajax({url:n,type:"GET",dataType:"json",data:{kdt_id:window._global.kdt_id}}).done(function(n){if(0===+n.code){var e=t.find(".js-all-goods"),o=t.find(".js-new-goods"),i=t.find(".js-order"),a=n.data,s="";s=(a.all_goods.count+"").length,e.find("a").attr("href",a.all_goods.url),e.find(".count").html(a.all_goods.count).addClass("l-"+s),s=(a.new_goods.count+"").length,o.find("a").attr("href",a.new_goods.url),o.find(".count").html(a.new_goods.count).addClass("l-"+s),i.find("a").attr("href",a.order.url)}})}(),function(){$(".js-select-coupon").on("click",function(){var t=$(this),n=t.data("id"),e=t.data("kdt-id"),o=window.motify;$.ajax({url:"/v2/guang/promocard/take.json",type:"POST",data:{groupId:n,kdtId:e}}).done(function(t){0===+t.code?o.log(t.msg||"成功领取优惠券"):1===+t.code?window.location.href=t.data.redirect:o.log(t.msg||"网络错误")}).fail(function(){o.log("网络错误")})})}(),function(){var t=$(".js-scroll-notice");t.length&&t.each(function(){function t(){a--,0>a+o&&(a=i),n.css({left:a})}var n=$(this),e=n.parents(".custom-notice-inner"),o=n.width(),i=e.width(),a=0;i>=o||(n.css({position:"relative"}),setInterval(t,25))})}(),define("wap/showcase/homepage/homepage",function(){}),function(){var t=$(".js-custom-level"),n=$(".js-custom-point"),e=$(".js-custom-level-title-section");if(!(+_global.fans_id<=0&&+_global.buyer_id<=0)){var o=window._global.url.wap+"/showcase/component/point.jsonp?"+$.param({kdt_id:window._global.kdt_id});(t.length>0||n.length>0)&&$.ajax({dataType:"jsonp",type:"GET",url:o,success:function(o){0===+o.code&&(t.html(o.data.level||"会员"),n.html(o.data.point||"暂无数据"),e.removeClass("hide"))}})}}(),define("wap/uc/title",function(){}),define("wap/showcase/shop_nav/main",["vendor/zepto/outer"],function(){var t=$(".js-navmenu"),n=t.find(".js-nav-pop");if(t.length){var e={showSubmenu:function(t){var n=$(t.target),e=n.parents(".nav-item"),o=n.hasClass(".js-mainmenu")?n:e.find(".js-mainmenu"),i=e.find(".js-submenu"),a=i.find(".arrow"),s=n.parents(".js-navmenu"),r=s.find(".nav-item");i.css("opacity","0").toggle();var c=r.length,d=r.index(e),l=o.outerWidth(),u=(i.outerWidth()-o.outerWidth())/2,h=i.outerWidth()/2;if(0===i.size())$(".js-submenu:visible").hide();else{var f=i.outerWidth(),w=e.outerWidth(),p="auto",v="auto",m="auto",g="auto";0===d?(p=o.position().left-u,v=h-a.outerWidth()/2):d===c-1&&f>w?(m=8,g=l/2-m):(p=o.position().left-u,v=h-a.outerWidth()/2);var b=5;0>p&&(v=v+p+b,p=b),0>m&&(g=g+m+b,m=b),i.css({left:p,right:m}),a.css({left:v,right:g}),$(".js-submenu:visible").not(i).hide(),i.css("opacity","1")}}};$(document).on("click",function(e){t[0]&&(e.target==t[0]||$.contains(t[0],e.target)||($(".js-submenu:visible").hide(0),t.hasClass("nav-show")&&(t.removeClass("nav-show").addClass("nav-hide"),setTimeout(function(){n.hide(0)},500))))}),$("body").on("click",".js-navmenu",function(t){t.fromMenu=!0,$.kdt.clickLogHandler.call(t.target,t)}),$("body").on("click",".js-submenu",function(t){t.fromMenu=!0,$.kdt.clickLogHandler.call(t.target,t),t.stopPropagation()}),$("body").on("click",".js-mainmenu",function(t){e.showSubmenu(t)});var o=".js-navmenu",i=$(".js-custom-paginations");$(o).size()+i.size()>0&&$("body").css("padding-bottom",$(".js-navmenu").height()||i.height());var a;$(window).on("scroll",function(t){t.preventDefault();var n=$(".js-navmenu"),e=n.find(".js-nav-pop");n.hasClass("nav-show")&&(n.removeClass("nav-show").addClass("nav-hide"),setTimeout(function(){e.hide(0)},500))}),$("body").on("click",".js-nav-special",function(t){var n=$(t.target),e=n.parents(".js-navmenu"),o=e.find(".js-nav-pop");"animation"!=e.data("animation")&&(e.data("animation","animation"),e.hasClass("nav-show")?(e.removeClass("nav-show").addClass("nav-hide"),a=setTimeout(function(){o.css("display","none"),e.data("animation","")},600)):(o.css("display","block"),e.addClass("nav-show").removeClass("nav-hide"),setTimeout(function(){e.data("animation","")},600)))})}}),function(){function t(t){"undefined"!=typeof window.WeixinJSBridge&&window.WeixinJSBridge.invoke("imagePreview",{current:t,urls:o})}if("undefined"!=typeof Swiper){!function(){var t=$(".custom-image-swiper"),n=t.find(".swiper-container"),e=t.width();e>320&&n.each(function(t,n){var o=$(n),i=o.height(),a=Math.floor(e/320*i);o.height(a).find(".swiper-slide a").height(a).find("img").css({"max-height":a,"max-width":e})})}(),$(".custom-image-swiper").each(function(t,n){var e=$(n),o=e.find(".swiper-container"),i=e.find(".swiper-pagination"),a={mode:"horizontal",pagination:i[0],paginationClickable:!0,calculateHeight:!0,autoplay:3500,updateOnImagesReady:!1,onFirstInit:function(){var t=e.find(".js-slide-lazy");t.each(function(){var t=$(this);t.attr("src",t.data("src"))})},onTouchStart:function(t){t.stopAutoplay()},onTouchEnd:function(t){t.startAutoplay()}};o.find(".swiper-slide").length>1&&new Swiper(o[0],a)});var n=window.navigator.userAgent.match(/MicroMessenger\/(\d+(\.\d+)*)/);if(null!==n&&n.length){var e=$(".js-image-swiper img, .custom-richtext img"),o=[],i=0;e.each(function(){var n=$(this),e=n.attr("data-src")||n.attr("src");if(n.width()>=i&&e){if(n.parents("a").length>0)return;o.push(e),n.on("click",function(){t(e)})}})}!function(){function t(){n+=100;var t=$(this);setTimeout(function(){t.addClass("done")},n)}var n=0,e=$(".js-tpl-fbb");e.find(".swiper-slide").each(t),e.swiper({mode:"horizontal",slidesPerView:"auto"})}(),function(){var t,n=$(".js-custom-scroll-nav"),e=n.find(".swiper-container");if(!(n.length<=0)){$(document).on("touchmove",function(t){t.preventDefault()});var o=0,i="";n.hasClass("custom-scroll-nav-left")?(o="-15deg",i="RotateLeft"):n.hasClass("custom-scroll-nav-right")&&(o="15deg",i="RotateRight");var a=n.data("animate"),s=n.data("animate-type");t=0;var r=n.find(".swiper-slide");r.each(function(n){t+=100;var e=$(this);setTimeout(function(){return function(){var t={rotate:o,skewX:o,translate3d:"0, 0, 0"};1>=n&&(t.opacity=1),e.zeptoAnimate(t,500)}}(n),t)});var c=$(".js-scroll-nav-blur"),d=$("body").height()/2;n.find(".swiper-container").css({height:d,paddingTop:d,overflow:"hidden"});var l,u=!1,h=0;e.swiper({mode:"vertical",calculateHeight:!1,slidesPerView:"auto",freeModeFluid:!0,watchActiveIndex:!0,onTouchMove:function(t){if(u||(u=!0,l=setTimeout(function(){c.addClass("custom-scroll-nav-blur-show")},400)),t.positions.current>-10&&(u=!1,clearTimeout(l),c.removeClass("custom-scroll-nav-blur-show")),t.activeIndex>1&&h!=t.activeIndex&&0==$(t.getSlide(t.activeIndex)).css("opacity"))if(h=t.activeIndex,"zoom"===a){var n=1.2;"zoom_in"===s&&(n=.8),$(t.getSlide(t.activeIndex)).css({opacity:0,"-webkit-transform":" scale("+n+") rotate("+o+") skewX("+o+") translate3d(0px, 0px, 0px)"}).zeptoAnimate({opacity:1,scale:"1",rotate:o,skewX:o,translate3d:"0, 0, 0"},400);for(var e=h;e--;)0==$(t.getSlide(e)).css("opacity")&&$(t.getSlide(e)).css({opacity:0,"-webkit-transform":" scale("+n+") rotate("+o+") skewX("+o+") translate3d(0px, 0px, 0px)"}).zeptoAnimate({opacity:1,scale:"1",rotate:o,skewX:o,translate3d:"0, 0, 0"},400)}else{var r=$(t.getSlide(t.activeIndex)),d="bounceInLeft"+i;"slide_right"===s&&(d="bounceInRight"+i),r.addClass("animated "+d);for(var e=h;e--;)0==$(t.getSlide(e)).css("opacity")&&$(t.getSlide(e)).addClass("animated "+d)}},onTouchEnd:function(t){t.positions.current>-10&&(u=!1,clearTimeout(l))}})}}()}}(),define("wap/showcase/modules/swiper/swiper_init",function(){}),define("wap/showcase/global_icon/views/event",[],function(){var t=function(){this.events={}};return $.extend(!0,t.prototype,{on:function(t,n){return"string"!=typeof t||"[object Function]"!==Object.prototype.toString.call(n)?!1:(this.events[t]||(this.events[t]=[]),this.events[t].push(n))},trigger:function(t){if("string"!=typeof t)return!1;if(!this.events[t])return this.events[t]=[],!1;for(var n=this.events[t],e=0,o=n.length;o>e;e++)n[e]()},off:function(t,n){if(!t&&!n)return void(this.events={});if(!n)return void(this.events[t]=[]);var e=this.events[t],o=e.indexOf(n);e.splice(o,1)}}),window.eventHandler=new t}),define("wap/showcase/global_icon/views/cart",["wap/showcase/global_icon/views/event"],function(){var t=$("#global-cart"),n=$("#right-icon"),e=+n.data("count"),o=1==e&&t.length>0;refreshCartIcon=function(){return o?void(!!$&&$.ajax({url:window._global.url.wap+"/trade/cart/count.jsonp",type:"GET",timeout:5e3,dataType:"jsonp",success:function(t){if(0===parseInt(t.code)){var e=parseInt(t.data);e>0?n.removeClass("hide"):n.addClass("hide")}}})):!1},refreshCartIcon(),window.eventHandler.on("cart:add",function(){t.addClass("new"),refreshCartIcon()})}),define("wap/components/tosser",[],function(){function t(t,n,e){this.from=t,this.to=n,this.running=!1,this.option=$.extend({offsetX:0,offsetY:0,onFinish:function(){}},e),this.init()}var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}();return t.prototype={getPositionInScreen:function(t){var n=t.offset();return{x:n.left+this.option.offsetX,y:n.top+this.option.offsetY}},init:function(){var t=this.getPositionInScreen(this.from),n=this.getPositionInScreen(this.to),e=$("<div>").css({position:"absolute",left:t.x,top:t.y,display:"none"}).addClass(this.option.klass).appendTo(document.body);this.fromPt=t,this.toPt=n,this.heart=e},startAnm:function(){function t(){if(d.running){if(o=(new Date-e)/w,0==o)return void n(t);a=100*o+200*o*o,c=a/u,i=f*(1*c-c*c)+h*c,r=-360*o,s="translate3d("+i+"px,"+a+"px, 0) rotate("+r+"deg)",l.style.transform=s,l.style.webkitTransform=s,a>u&&d.destroy(),n(t)}}if(!this.running){this.running=!0;var e,o,i,a,s,r,c,d=this,l=this.heart[0],u=this.toPt.y-this.fromPt.y,h=this.toPt.x-this.fromPt.x,f=150>u?0:-120,w=150>u?1500:1e3;e=new Date,l.style.display="block",t()}},destroy:function(){this.option.onFinish(),this.heart.remove(),this.running=!1}},t}),define("wap/showcase/global_icon/views/wish",["wap/components/tosser","wap/showcase/global_icon/views/event"],function(t){var n=$("#global-wish"),e=!1;window.eventHandler.on("wish:add",function(){n.addClass("new"),e=!0}),window.eventHandler.on("wishScrollEnd",function(){if(e){var n=new t($(".js-add-wish"),$(".js-show-more-btn"),{offsetX:5,offsetY:8,klass:"wish-add-drop",onFinish:function(){motify.log("添加心愿单成功")}});n.startAnm(),e=!1}})}),define("wap/showcase/global_icon/main",["wap/showcase/global_icon/views/cart","wap/showcase/global_icon/views/wish","wap/showcase/global_icon/views/event"],function(){var t=$("#right-icon"),n=t.find(".js-show-more-btn"),e=+t.data("count")+1;$("body").on("click",".js-show-more-btn",function(){t.hasClass("show")?t.removeClass("show").removeAttr("style"):t.addClass("show").css("width",50*e)}),$(document).on("click",function(e){t[0]&&(e.target==n[0]||$.contains(t[0],e.target)||t.removeClass("show").removeAttr("style"))}),$(window).on("scroll",function(){t.removeClass("show").removeAttr("style")}),window.eventHandler.on("global_icon:new",function(){n.addClass("new")})}),require(["vendor/zepto/outer","wap/components/footer_auto","wap/showcase/homepage/homepage","wap/uc/title","wap/showcase/shop_nav/main","wap/showcase/modules/swiper/swiper_init","wap/showcase/global_icon/main"],function(){}),define("main",function(){});